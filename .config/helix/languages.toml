[[language]]
name = "python"
language-servers = ["pyright", "ruff"]
auto-format = true
formatter = { command = "ruff", args = ["format", "-"] }

# === Python Debugger (debugpy) ===
# Docker使用時: :debug-remote localhost:5678 でアタッチ
[language.debugger]
name = "debugpy"
transport = "stdio"
command = "python3"
args = ["-m", "debugpy.adapter"]

# ローカル実行用テンプレート
[[language.debugger.templates]]
name = "launch"
request = "launch"
completion = [{ name = "entrypoint", completion = "filename", default = "." }]
args = { mode = "debug", program = "{0}" }

[language-server.pyright]
command = "pyright-langserver"
args = ["--stdio"]

[language-server.ruff]
command = "ruff"
args = ["server"]

[[language]]
name = "markdown"
language-servers = ["marksman"]
soft-wrap.enable = true

# === Vue ===
[[language]]
name = "vue"
language-servers = ["typescript-language-server", "eslint", "tailwindcss-ls"]
auto-format = true
formatter = { command = "/Users/masato.takayama/.local/share/mise/installs/node/24.12.0/bin/npx", args = ["prettier", "--parser", "vue"] }

# === TypeScript ===
[[language]]
name = "typescript"
language-servers = ["typescript-language-server", "eslint", "tailwindcss-ls"]
auto-format = true
formatter = { command = "/Users/masato.takayama/.local/share/mise/installs/node/24.12.0/bin/npx", args = ["prettier", "--parser", "typescript"] }

[[language]]
name = "tsx"
language-servers = ["typescript-language-server", "eslint", "tailwindcss-ls"]
auto-format = true
formatter = { command = "/Users/masato.takayama/.local/share/mise/installs/node/24.12.0/bin/npx", args = ["prettier", "--parser", "typescript"] }

[language-server.typescript-language-server]
command = "typescript-language-server"
args = ["--stdio"]

[[language-server.typescript-language-server.config.plugins]]
name = "@vue/typescript-plugin"
location = "/Users/masato.takayama/.npm-global/lib/node_modules/@vue/language-server/node_modules/@vue/typescript-plugin"
languages = ["vue"]

# === JavaScript ===
[[language]]
name = "javascript"
language-servers = ["typescript-language-server", "eslint", "tailwindcss-ls"]
auto-format = true
formatter = { command = "/Users/masato.takayama/.local/share/mise/installs/node/24.12.0/bin/npx", args = ["prettier", "--parser", "babel"] }

# === ESLint LSP ===
[language-server.eslint]
command = "vscode-eslint-language-server"
args = ["--stdio"]

[language-server.eslint.config]
validate = "on"
experimental = { useFlatConfig = true }
rulesCustomizations = []
run = "onType"
problems = { shortenToSingleLine = false }
nodePath = ""

[language-server.eslint.config.codeAction.showDocumentation]
enable = true

# === JSON ===
[[language]]
name = "json"
auto-format = true
formatter = { command = "/Users/masato.takayama/.local/share/mise/installs/node/24.12.0/bin/npx", args = ["prettier", "--parser", "json"] }

# === CSS ===
[[language]]
name = "css"
language-servers = ["vscode-css-language-server", "tailwindcss-ls"]
auto-format = true
formatter = { command = "/Users/masato.takayama/.local/share/mise/installs/node/24.12.0/bin/npx", args = ["prettier", "--parser", "css"] }

# === HTML ===
[[language]]
name = "html"
language-servers = ["vscode-html-language-server", "tailwindcss-ls"]

# === Tailwind CSS LSP ===
[language-server.tailwindcss-ls]
command = "tailwindcss-language-server"
args = ["--stdio"]
